(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-429a7c7e"],{"264d":function(e,t,r){"use strict";var s=r("ee77"),o=r.n(s);o.a},"96e8":function(e,t,r){"use strict";var s=r("d4fe"),o=r.n(s);o.a},cc1d:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"signup"},[s("ModuleTransition",{attrs:{delay:"0.05",duration:"0.3",mode:"out-in"}},[e.ShowModule?s("div",{staticClass:"signup-con"},[s("div",{staticClass:"title-container"},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:r("9d64"),alt:""}}),s("span",[e._v("平凡的你我")])])]),e.ShowModule?s("Card",{attrs:{icon:"log-in",title:"欢迎注册",bordered:!1}},[s("div",{staticClass:"form-con"},[s("signup-form",{attrs:{loading:e.loading},on:{"on-success-valid":e.handleSubmit}})],1),s("span",{staticClass:"login"},[e._v("\n          已有账号？\n          "),s("span",{on:{click:e.login}},[e._v("返回登录")])])]):e._e()],1):e._e()])],1)},o=[],n=(r("96cf"),r("1da1")),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"SignupForm",staticClass:"SignupForm",attrs:{model:e.form,rules:e.rules},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit(t)}}},[r("FormItem",{attrs:{prop:"name"}},[r("Input",{attrs:{placeholder:"请输入抖音号名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:16,type:"ios-person"}})],1)])],1),r("FormItem",{attrs:{prop:"password"}},[r("Input",{attrs:{icon:"password"===e.passwordType[0]?"md-eye-off":"md-eye",type:e.passwordType[0],password:"",placeholder:"请输入密码"},on:{"on-click":function(t){return e.showPwd(0)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),r("FormItem",{attrs:{prop:"repassword"}},[r("Input",{attrs:{type:e.passwordType[1],icon:"password"===e.passwordType[1]?"md-eye-off":"md-eye",password:"",placeholder:"请再次输入密码"},on:{"on-click":function(t){return e.showPwd(1)}},model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword",t)},expression:"form.repassword"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),r("FormItem",{attrs:{prop:"phone"}},[r("Input",{attrs:{maxlength:"11",placeholder:"请输入手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:16,type:"md-call"}})],1)])],1),r("Row",[r("Col",{attrs:{span:18}},[r("FormItem",{attrs:{prop:"userName"}},[r("Input",{staticClass:"emailInput",staticStyle:{width:"250px"},attrs:{type:"text",placeholder:"请输入你的电子邮箱"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:14,type:"md-mail"}})],1)])],1)],1),r("Col",{attrs:{span:6}},[r("Button",{class:e.show?"send":"send button--info",attrs:{type:"primary",shape:"circle",disabled:!e.show},on:{click:e.getCode}},[e._v(e._s(e.btnText))])],1)],1),r("FormItem",{attrs:{prop:"emailVerifyCode"}},[r("Input",{attrs:{placeholder:"请输入邮箱验证码"},model:{value:e.form.emailVerifyCode,callback:function(t){e.$set(e.form,"emailVerifyCode",t)},expression:"form.emailVerifyCode"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:16,type:"md-code"}})],1)])],1),r("FormItem",[r("Input",{attrs:{placeholder:"请输入公司名称（选填）"},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:16,type:"ios-briefcase"}})],1)])],1),r("FormItem",[r("Input",{attrs:{placeholder:"请输入推荐人邀请码（选填）"},model:{value:e.form.invitationCode,callback:function(t){e.$set(e.form,"invitationCode",t)},expression:"form.invitationCode"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:16,type:"md-planet"}})],1)])],1),r("FormItem",[r("Button",{attrs:{type:"primary",loading:e.loading,long:""},on:{click:e.handleSubmit}},[e._v("注册")])],1)],1)},i=[],p=(r("6b54"),r("c276")),l=r("c24f"),d=function(e,t,r){6==t.toString().length?r():r(new Error("请输入6位邮箱验证码"))},u=function(e,t,r){11==t.toString().length?r():r(new Error("请输入11位手机号码"))},c={name:"SignupForm",props:{userNameRules:{type:Array,default:function(){return[{required:!0,message:"抖音号名称不能为空",trigger:"blur"}]}},passwordRules:{type:Array,default:function(){return[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:16,message:"密码需要 6 - 16 个字符",trigger:"blur"}]}},loading:{type:Boolean,default:!1}},data:function(){return{form:{userName:"",password:"",repassword:"",phone:"",name:"",company:"",emailVerifyCode:"",invitationCode:""},passwordType:["password","password"],redirect:void 0,timer:null,count:"",show:!1,btnText:"发验证码"}},mounted:function(){var e=this.$route.query.invitationCode;e&&(this.form.invitationCode=e)},computed:{rules:function(){var e=this;return{name:this.userNameRules,password:this.passwordRules,repassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,trigger:"blur",validator:function(t,r,s){0==r.length?s(new Error("请输入确认密码")):r==e.form.password?s():s(new Error("两次密码输入不匹配"))}}],userName:[{required:!0,message:"电子邮箱不能为空",trigger:"blur"},{required:!0,trigger:"blur",validator:function(t,r,s){0==r.length?s(new Error("请输入你的邮箱地址")):Object(p["x"])(r)?(e.show=!0,s()):s(new Error("邮箱格式不正确"))}}],emailVerifyCode:[{required:!0,message:"邮箱验证码不能为空",trigger:"blur"},{required:!0,trigger:"blur",vaildator:d}],phone:[{required:!0,message:"个人手机号不能为空",trigger:"blur"},{required:!0,trigger:"blur",vaildator:u}]}}},methods:{handleSubmit:function(){var e=this;this.$refs.SignupForm.validate((function(t){t&&e.$emit("on-success-valid",e.form)}))},showPwd:function(e){"password"===this.passwordType[e]?this.passwordType[e]="text":this.passwordType[e]="password",this.$forceUpdate()},getCode:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=60,this.timer){e.next=6;break}return e.next=4,Object(l["getCode"])({userName:this.form.userName});case 4:r=e.sent,200==r.code&&(this.$Message.success("邮件已发送，请尽快查看！"),this.count=t,this.show=!1,this.timer=setInterval((function(){s.count>0&&s.count<=t?(s.count--,s.btnText="".concat(s.count,"s 重试")):(s.show=!0,clearInterval(s.timer),s.timer=null,s.btnText="发验证码")}),1e3));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},m=c,f=(r("96e8"),r("2877")),h=Object(f["a"])(m,a,i,!1,null,"76d027d9",null),g=h.exports,w=g,y=r("cbd1"),v=r("f2b1"),b={components:{SignupForm:w,ModuleTransition:y["a"]},mixins:[v["a"]],data:function(){return{loading:!1}},methods:{handleSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(s in this.loading=!0,r=JSON.parse(JSON.stringify(t)),delete r.repassword,r)r[s]=r[s].trim();return e.prev=4,e.next=7,signup(r);case 7:o=e.sent,this.loading=!1,200==o.code?(this.$Message.success("注册成功！"),this.$router.push({name:"login"})):this.$Message.error(o.message),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](4),this.$Message.error("系统繁忙，请稍后再试！"),this.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));function t(t){return e.apply(this,arguments)}return t}(),login:function(){this.$router.push({name:"login"})}}},x=b,I=(r("264d"),Object(f["a"])(x,s,o,!1,null,null,null));t["default"]=I.exports},d4fe:function(e,t,r){},ee77:function(e,t,r){}}]);